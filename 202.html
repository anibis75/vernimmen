<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Quiz Final - QCM Plausibles</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-b from-white to-slate-100 text-gray-800">
  <div class="max-w-2xl mx-auto py-8 px-4 min-h-screen">
    <h1 class="text-2xl font-bold mb-6 text-center text-blue-700">8. Les comptes consolidés</h1>
    <div class="mb-6 text-center">
      <label class="block mb-1 font-semibold">Choisis ton prénom :</label>
      <select class="border border-gray-300 rounded px-4 py-2" id="nom">
        <option value="azad">azad</option>
        <option value="remi">remi</option>
      </select>
    </div>
    <div id="quiz-container"></div>
    <div class="hidden text-center mt-10 bg-white p-6 rounded shadow" id="resultat">
      <h2 class="text-xl font-bold text-green-600 mb-2">Merci <span id="prenomResultat"></span> !</h2>
      <p class="text-lg">Tu as obtenu <span id="scoreFinal"></span>.</p>
      <div class="hidden mt-10 bg-white p-6 rounded shadow" id="corrections">
        <h3 class="text-xl font-bold text-blue-600 mb-4">Corrections :</h3>
        <ul id="recapitulatif" class="space-y-6 text-left"></ul>
      </div>
    </div>
  </div>

<script>
const questions = [
  {
    "question": "Dans quelles situations doit-on avoir à l’esprit le principe de la continuité de l’exploitation ?",
    "choices": [
      {
        "text": "Quand on évalue les actifs de l’entreprise ; quand on veut déterminer les besoins de fonds.",
        "correct": true
      },
      {
        "text": "Lorsqu’on calcule le résultat net annuel ; lors de l’affectation des dividendes.",
        "correct": false
      },
      {
        "text": "Au moment de fixer la politique marketing ; quand on prépare la campagne publicitaire.",
        "correct": false
      },
      {
        "text": "Pendant les négociations salariales ; quand la société élabore son rapport RSE.",
        "correct": false
      }
    ]
  },
  {
    "question": "Pourquoi le principe de permanence des méthodes est-il fondamental ?",
    "choices": [
      {
        "text": "Pour ne pas compter deux fois le même bénéfice comptabilisé sur deux exercices différents à cause de méthodes différentes.",
        "correct": true
      },
      {
        "text": "Pour pouvoir valoriser librement les stocks à chaque clôture selon les cours du marché.",
        "correct": false
      },
      {
        "text": "Pour accélérer l’amortissement des immobilisations et réduire l’impôt sur les sociétés.",
        "correct": false
      },
      {
        "text": "Afin d’autoriser le passage illimité d’une norme nationale à une norme étrangère chaque année.",
        "correct": false
      }
    ]
  },
  {
    "question": "Qu’est-ce que l’IASB ?",
    "choices": [
      {
        "text": "Organisme établissant des règles comptables internationales, voir le paragraphe 6.3.",
        "correct": true
      },
      {
        "text": "Direction générale de la Commission chargée des aides d’État, paragraphe 4.4.",
        "correct": false
      },
      {
        "text": "Agence européenne chargée du contrôle prudentiel des banques, voir le paragraphe 5.2.",
        "correct": false
      },
      {
        "text": "Comité fiscal de l’OCDE élaborant les conventions de double imposition, paragraphe 12.7.",
        "correct": false
      }
    ]
  },
  {
    "question": "Qu’est-ce que l’ANC ?",
    "choices": [
      {
        "text": "Agence notariale centrale responsable de l’enregistrement des statuts des sociétés.",
        "correct": false
      },
      {
        "text": "Autorité des normes comptables chargée principalement d’établir les normes comptables françaises.",
        "correct": true
      },
      {
        "text": "Association nationale des commissaires aux comptes gérant le contrôle qualité des auditeurs.",
        "correct": false
      },
      {
        "text": "Autorité numérique de la concurrence surveillant les plateformes digitales françaises.",
        "correct": false
      }
    ]
  },
  {
    "question": "Une entreprise française peut-elle produire ses comptes uniquement en normes IFRS ?",
    "choices": [
      {
        "text": "Non, sauf si plus de 75 % de son capital est détenu par des investisseurs étrangers.",
        "correct": false
      },
      {
        "text": "Non ; même cotée, elle publie ses comptes consolidés en IFRS mais ses comptes sociaux en normes françaises.",
        "correct": true
      },
      {
        "text": "Oui, à condition d’obtenir un agrément préalable du ministère de l’Économie.",
        "correct": false
      },
      {
        "text": "Oui, mais seulement si son chiffre d’affaires dépasse 1 milliard d’euros pendant trois ans.",
        "correct": false
      }
    ]
  },
  {
    "question": "Qu’est-ce que la juste valeur ?",
    "choices": [
      {
        "text": "Voir le paragraphe 10.4.",
        "correct": false
      },
      {
        "text": "Voir le paragraphe 8.6.",
        "correct": false
      },
      {
        "text": "Voir le paragraphe 6.13.",
        "correct": true
      },
      {
        "text": "Voir le paragraphe 3.2.",
        "correct": false
      }
    ]
  },
  {
    "question": "Peut-on produire des comptes qui mélangent normes françaises et normes IFRS ?",
    "choices": [
      {
        "text": "Oui, lorsqu’une filiale étrangère représente plus de 50 % du groupe.",
        "correct": false
      },
      {
        "text": "Non, les normes IFRS doivent être appliquées dans leur ensemble et exclusivement.",
        "correct": true
      },
      {
        "text": "Oui, si les états financiers intermédiaires restent en normes françaises.",
        "correct": false
      },
      {
        "text": "Non, sauf pour les instruments financiers dérivés désignés en couverture.",
        "correct": false
      }
    ]
  },
  {
    "question": "Pourquoi l’Autorité des marchés financiers intervient-elle dans la normalisation comptable ?",
    "choices": [
      {
        "text": "Pour valider les plans de restructuration des groupes en difficulté financière.",
        "correct": false
      },
      {
        "text": "Pour délivrer les licences professionnelles aux experts-comptables indépendants.",
        "correct": false
      },
      {
        "text": "Pour améliorer la qualité de l’information financière des sociétés faisant appel à l’épargne du public.",
        "correct": true
      },
      {
        "text": "Pour fixer les barèmes d’imposition applicables aux sociétés cotées en France.",
        "correct": false
      }
    ]
  },
  {
    "question": "Imputer les effets de changements de méthodes comptables sur capitaux propres ou sur résultat ? Pourquoi ?",
    "choices": [
      {
        "text": "Sur le résultat ; cela accroît la comparabilité entre bilans successifs et réduit la volatilité des capitaux propres.",
        "correct": false
      },
      {
        "text": "Sur les flux de trésorerie ; c’est la seule rubrique vraiment neutre fiscalement.",
        "correct": false
      },
      {
        "text": "Sur les capitaux propres ; on corrige ainsi les résultats passés et on évite la tentation de gonfler artificiellement le résultat.",
        "correct": true
      },
      {
        "text": "Sur les provisions réglementées ; elles absorbent naturellement les effets de méthode.",
        "correct": false
      }
    ]
  },
  {
    "question": "Pourquoi ne pas avoir obligé toutes les entreprises à appliquer dès 2005 les IFRS ?",
    "choices": [
      {
        "text": "Les banques centrales refusaient de reconnaître les actifs évalués au coût amorti.",
        "correct": false
      },
      {
        "text": "Les IFRS étaient encore interdites par le droit fiscal européen avant 2010.",
        "correct": false
      },
      {
        "text": "Les normes IAS 39 et IAS 40 n’étaient pas traduites officiellement en français.",
        "correct": false
      },
      {
        "text": "Normes complexes pensées pour les sociétés cotées ; coût trop élevé pour les PME sans gain évident.",
        "correct": true
      }
    ]
  },
  {
    "question": "Qu’est-ce qui manquerait pour faire du document d’enregistrement universel la bible de l’investisseur ?",
    "choices": [
      {
        "text": "Des éléments prévisionnels détaillés.",
        "correct": true
      },
      {
        "text": "Un audit environnemental revu chaque trimestre.",
        "correct": false
      },
      {
        "text": "Un rapport d’éthique signé par tous les salariés.",
        "correct": false
      },
      {
        "text": "La liste complète des fournisseurs classés par volume d’achat.",
        "correct": false
      }
    ]
  },
  {
    "question": "Quelles sont les limites aux obligations de publication des comptes ?",
    "choices": [
      {
        "text": "Elles cessent dès qu’une entreprise dépasse 5 ans d’existence légale.",
        "correct": false
      },
      {
        "text": "Elles s’appliquent seulement aux sociétés dont le capital est supérieur à 2 M€.",
        "correct": false
      },
      {
        "text": "Elles n’incluent pas les annexes fiscales, uniquement les rapports de gestion.",
        "correct": false
      },
      {
        "text": "Elles ne sont pas harmonisées au niveau européen, ne portent pas sur les comptes consolidés et sont inégalement respectées.",
        "correct": true
      }
    ]
  }
];
</script>

<script>
let score = 0;
let envoiFait = false;
const reponsesUtilisateur = {};

function afficherQuestions() {
  const container = document.getElementById('quiz-container');
  questions.forEach((q, i) => {
    const step = document.createElement('div');
    step.className = "question-step" + (i === 0 ? "" : " hidden");
    step.id = `step${i+1}`;
    let html = `<div class="bg-white shadow p-4 mb-4 rounded">
      <p class="mb-4 font-medium">Question ${i+1} / ${questions.length} :<br/>${q.question}</p>`;
    q.choices.forEach((rep, idx) => {
      const valid = rep.correct ? 'correct' : 'wrong';
      html += `<label class="block mb-3 cursor-pointer hover:bg-blue-50 p-3 border rounded" onclick="repondre(this, 'q${i+1}', '${valid}', ${i+1})">
          <input class="hidden" name="q${i+1}" type="radio" value="${valid}"/> ${rep.text}</label>`;
    });
    html += `</div>`;
    step.innerHTML = html;
    container.appendChild(step);
  });
}

function repondre(label, q, val, i) {
  if (envoiFait || label.classList.contains('answered')) return;
  label.classList.add('answered');
  const questionText = document.querySelector(`#step${i} p`).innerText;
  const bonne = document.querySelector(`input[name="q${i}"][value="correct"]`).parentElement.textContent.trim();
  const choisie = label.textContent.trim();
  reponsesUtilisateur[q] = { question: questionText, bonne: bonne, choisie: choisie };
  if (val === 'correct') score++;
  document.getElementById('step' + i).classList.add('hidden');
  const nextStep = document.getElementById('step' + (i + 1));
  if (nextStep) {
    nextStep.classList.remove('hidden');
  } else {
    if (!envoiFait && confirm("Envoyer tes réponses ?")) {
      envoiFait = true;
      envoyer();
    }
  }
}

function envoyer() {
  const nom = document.getElementById('nom').value;
  document.getElementById('quiz-container').classList.add('hidden');
  document.getElementById('resultat').classList.remove('hidden');
  document.getElementById('prenomResultat').textContent = nom;
  document.getElementById('scoreFinal').textContent = score + " / " + questions.length;
  document.getElementById('corrections').classList.remove('hidden');

  const recapList = document.getElementById('recapitulatif');
  recapList.innerHTML = "";
  Object.entries(reponsesUtilisateur).forEach(([key, val], index) => {
    const li = document.createElement('li');
    li.innerHTML = `<p class='font-semibold'>${val.question}</p>
                    <p><span class='text-red-600'>Réponse choisie : ${val.choisie}</span></p>
                    <p><span class='text-green-600'>Bonne réponse : ${val.bonne}</span></p>`;
    recapList.appendChild(li);
  });
}

window.onload = afficherQuestions;
</script>
</body>
</html>
